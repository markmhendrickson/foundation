# Feature Unit Manifest Template (Simple)
# Minimal manifest for lightweight projects
# Use this when foundation-config.yaml has: feature_units.manifest_complexity: "simple"

feature_id: "FU-YYYY-MM-NNN"  # Or your configured ID pattern
version: "1.0.0"
status: "draft"  # draft | in_progress | review | completed
priority: "P1"  # P0 (critical) | P1 (high) | P2 (medium) | P3 (low)
risk_level: "medium"  # low | medium | high

# Metadata
metadata:
  title: "Feature Name"
  description: "Brief description"
  owner: "owner@example.com"
  reviewers:
    - "reviewer1@example.com"
  created_at: "2025-01-01"
  target_release: "v1.0.0"

# Product strategy (optional, enabled via foundation-config)
product_strategy:
  # If track_defensible_differentiation: true
  defensible_differentiation:
    validates: []  # List of differentiation types this FU validates
      # Examples from your configured types:
      # - "privacy-first"
      # - "deterministic"
      # - "cross-platform"
    mechanism: "How this FU enables the differentiation"
  
  # If track_competitive_positioning: true
  competitive_positioning:
    advantage: "What advantage this provides vs competitors"
    comparison: "Specific competitor comparison"

# Dependencies
dependencies:
  requires:
    - feature_id: "FU-YYYY-MM-NNN"
      reason: "Why this dependency is needed"
  
  blocks:
    - feature_id: "FU-YYYY-MM-NNN"
      reason: "Why this blocks other work"

# Kill switch / defer criteria (optional, enabled via foundation-config)
kill_switch:
  conditions:
    - condition: "Dependency takes >2x estimated time"
      action: "Defer to next release"
    - condition: "Critical bug discovered"
      action: "Pause until bug fixed"

# Observability (REQUIRED: At least one metric or log)
observability:
  # Metrics (at least one required)
  metrics:
    - name: "feature_operation_total"
      type: "counter"  # counter | gauge | histogram
      labels:
        - "status"  # success | failed
      description: "Total operations"
    
    - name: "feature_operation_duration_ms"
      type: "histogram"
      buckets: [100, 500, 1000, 5000]
      description: "Operation duration"
  
  # Logs
  logs:
    - level: "info"
      event: "operation_completed"
      fields:
        - "feature_id"
        - "duration_ms"
    
    - level: "error"
      event: "operation_failed"
      fields:
        - "error_code"
        - "feature_id"

# Testing requirements
testing:
  unit_tests:
    - file: "tests/unit/features/{feature_id}/test.test.ts"
      tests:
        - "test case 1"
        - "test case 2"
  
  integration_tests:
    - file: "tests/integration/features/{feature_id}/test.test.ts"
      tests:
        - "integration test 1"
  
  e2e_tests:  # Optional
    - file: "tests/e2e/features/{feature_id}/test.spec.ts"
      tests:
        - "e2e flow 1"
  
  # Coverage targets (from foundation-config)
  coverage:
    lines: 80
    branches: 80
    critical_paths: 100

# Rollout plan (optional)
rollout:
  strategy: "instant"  # instant | phased | canary
  
  # Rollback plan
  rollback:
    steps:
      - "Rollback step 1"
      - "Rollback step 2"
    triggers:
      - condition: "error_rate > 5%"
        action: "Automatic rollback"
  
  # Monitoring
  monitoring:
    key_metrics:
      - metric: "feature_operation_total"
        threshold: "success_rate > 95%"

# Documentation updates
documentation:
  files_updated:
    - path: "docs/path/to/doc.md"
      changes: "What changed"
  
  files_created:
    - path: "docs/path/to/new_doc.md"
      purpose: "Purpose of new doc"

# Notes
notes: |
  Additional context, design decisions, or links to external resources.

links:
  - title: "Design Doc"
    url: "https://example.com/design"





